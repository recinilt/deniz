<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Video Oynat</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
    background: #0f172a;
    color: #e2e8f0;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 0;
  }

  /* --- Hata kutusu --- */
  .error-card {
    background: #1e293b;
    border-radius: 16px;
    padding: 2rem;
    max-width: 480px;
    width: 90%;
    text-align: center;
    margin-top: 15vh;
    box-shadow: 0 8px 32px rgba(0,0,0,0.4);
  }
  .error-card .icon { font-size: 3rem; margin-bottom: 0.8rem; }
  .error-card h1 { font-size: 1.2rem; color: #f87171; margin-bottom: 0.5rem; }
  .error-card p { font-size: 0.9rem; color: #94a3b8; }

  /* --- Video modu --- */
  .video-wrapper {
    width: 100%;
    max-width: 960px;
    margin: 0 auto;
  }

  /* Ust bilgi bari */
  .info-bar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-wrap: wrap;
    gap: 0.5rem;
    padding: 0.7rem 1rem;
    background: #1e293b;
  }
  .time-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
    background: #2563eb;
    color: white;
    padding: 0.35rem 0.75rem;
    border-radius: 6px;
    font-family: 'Consolas', 'Courier New', monospace;
    font-size: 1rem;
    font-weight: 600;
  }
  .info-text {
    font-size: 0.82rem;
    color: #94a3b8;
  }
  .btn {
    display: inline-flex;
    align-items: center;
    gap: 0.3rem;
    padding: 0.4rem 0.9rem;
    background: #334155;
    color: #e2e8f0;
    border: none;
    border-radius: 6px;
    font-size: 0.85rem;
    cursor: pointer;
    text-decoration: none;
    transition: background 0.2s;
    white-space: nowrap;
  }
  .btn:hover { background: #475569; }
  .btn-primary { background: #2563eb; color: white; }
  .btn-primary:hover { background: #1d4ed8; }

  /* iframe alani */
  .video-container {
    position: relative;
    width: 100%;
    padding-bottom: 56.25%; /* 16:9 */
    background: #000;
  }
  .video-container iframe {
    position: absolute;
    top: 0; left: 0;
    width: 100%;
    height: 100%;
    border: none;
  }

  /* Alt bilgi */
  .bottom-bar {
    padding: 0.6rem 1rem;
    background: #1e293b;
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-wrap: wrap;
    gap: 0.5rem;
  }
  .bottom-bar .hint {
    font-size: 0.8rem;
    color: #64748b;
    line-height: 1.4;
  }
  .bottom-bar .hint strong { color: #f59e0b; }

  /* Mobil */
  @media (max-width: 640px) {
    .info-bar { flex-direction: column; align-items: flex-start; }
    .bottom-bar { flex-direction: column; align-items: flex-start; }
  }
</style>
</head>
<body>

<!-- Hata durumu -->
<div class="error-card" id="errorCard" style="display:none;">
  <div class="icon">&#x26A0;&#xFE0F;</div>
  <h1 id="errorTitle">Hata</h1>
  <p id="errorMsg">Video ID bulunamadi.</p>
</div>

<!-- Video modu -->
<div class="video-wrapper" id="videoSection" style="display:none;">

  <!-- Ust bar -->
  <div class="info-bar">
    <div>
      <span class="time-badge" id="timeBadge">&#x23F1; 00:00:00</span>
      <span class="info-text" id="seekInfo">konumuna gidin</span>
    </div>
    <div style="display:flex; gap:0.4rem; flex-wrap:wrap;">
      <a class="btn btn-primary" id="openInBrowser" href="#" target="_blank">&#x25B6;&#xFE0F; Tam Ekran Ac</a>
    </div>
  </div>

  <!-- Video iframe -->
  <div class="video-container">
    <iframe id="videoFrame" src="" allow="autoplay; fullscreen" allowfullscreen></iframe>
  </div>

  <!-- Alt bilgi -->
  <div class="bottom-bar">
    <div class="hint">
      &#x1F4A1; Video yuklenince <strong id="seekTimeText">belirtilen zamana</strong> manuel ilerleyin.<br>
      &#x1F4F1; Mobilde tam ekran icin yukardaki <strong>"Tam Ekran Ac"</strong> butonunu kullanin.
    </div>
  </div>

</div>

<script>
(function() {
  var params = new URLSearchParams(window.location.search);
  var fileId = params.get('id');
  var t = params.get('t');

  function showError(title, msg) {
    document.getElementById('errorCard').style.display = 'block';
    document.getElementById('errorTitle').textContent = title;
    document.getElementById('errorMsg').textContent = msg;
  }

  if (!fileId) {
    showError('Parametre Eksik', 'URL\'de "id" parametresi bulunamadi. Ornek: play.html?id=DOSYA_ID&t=5m12s');
    return;
  }
  fileId = fileId.replace(/[^a-zA-Z0-9_-]/g, '');
  if (fileId.length < 10) {
    showError('Gecersiz ID', 'Video ID cok kisa veya gecersiz.');
    return;
  }

  var timeSeconds = 0;
  var timeDisplay = '00:00:00';
  if (t) {
    t = t.replace(/[^0-9hms]/g, '');
    var h = 0, m = 0, s = 0;
    var hM = t.match(/(\d+)h/);
    var mM = t.match(/(\d+)m/);
    var sM = t.match(/(\d+)s/);
    if (hM) h = parseInt(hM[1]);
    if (mM) m = parseInt(mM[1]);
    if (sM) s = parseInt(sM[1]);
    timeSeconds = h * 3600 + m * 60 + s;
    timeDisplay = pad(h) + ':' + pad(m) + ':' + pad(s);
  }

  // preview: iframe icinde acar, Drive uygulamasi ACILMAZ
  var previewUrl = 'https://drive.google.com/file/d/' + fileId + '/preview';

  // view: tam tarayici modunda acar (timestamp destekli)
  var viewUrl = 'https://drive.google.com/file/d/' + fileId + '/view';
  if (t) viewUrl += '?t=' + t;

  document.getElementById('videoSection').style.display = 'block';
  document.getElementById('videoFrame').src = previewUrl;
  document.getElementById('openInBrowser').href = viewUrl;

  if (timeSeconds > 0) {
    document.getElementById('timeBadge').textContent = '\u23F1 ' + timeDisplay;
    document.getElementById('seekInfo').textContent = 'konumuna gidin';
    document.getElementById('seekTimeText').textContent = timeDisplay + ' konumuna';
  } else {
    document.getElementById('timeBadge').textContent = '\u25B6\uFE0F Bastan';
    document.getElementById('seekInfo').textContent = '';
    document.getElementById('seekTimeText').textContent = 'baslangica';
  }

  document.title = 'Video \u2014 ' + timeDisplay;

  function pad(n) { return n < 10 ? '0' + n : '' + n; }
})();
</script>
</body>
</html>
