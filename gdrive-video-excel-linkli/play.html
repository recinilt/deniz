<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Video Oynatıcı</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
    background: #0f172a;
    color: #e2e8f0;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 1.5rem;
  }
  .card {
    background: #1e293b;
    border-radius: 16px;
    padding: 2.5rem 2rem;
    max-width: 480px;
    width: 100%;
    text-align: center;
    box-shadow: 0 8px 32px rgba(0,0,0,0.4);
  }
  .icon { font-size: 3rem; margin-bottom: 1rem; }
  h1 { font-size: 1.4rem; font-weight: 600; margin-bottom: 0.5rem; color: #f8fafc; }
  .time-badge {
    display: inline-block;
    background: #2563eb;
    color: white;
    padding: 0.4rem 1rem;
    border-radius: 8px;
    font-family: 'Consolas', 'Courier New', monospace;
    font-size: 1.3rem;
    font-weight: 700;
    margin: 1rem 0;
  }
  .info {
    font-size: 0.95rem;
    color: #94a3b8;
    margin: 1rem 0;
    line-height: 1.5;
  }
  .btn {
    display: inline-block;
    margin-top: 1rem;
    padding: 0.9rem 2rem;
    background: #2563eb;
    color: white;
    border: none;
    border-radius: 10px;
    font-size: 1.1rem;
    font-weight: 600;
    cursor: pointer;
    text-decoration: none;
    transition: background 0.2s, transform 0.1s;
  }
  .btn:hover { background: #1d4ed8; transform: scale(1.02); }
  .btn:active { transform: scale(0.98); }
  .error { color: #f87171; }
  .help {
    margin-top: 1.5rem;
    padding-top: 1rem;
    border-top: 1px solid #334155;
    font-size: 0.82rem;
    color: #64748b;
    line-height: 1.6;
  }
  .hidden { display: none; }
</style>
</head>
<body>

<div class="card">
  <div class="icon">&#x1F3AC;</div>
  <h1>Video Oynatıcı</h1>

  <div id="errorBox" class="hidden">
    <div class="info error" id="errorMsg"></div>
  </div>

  <div id="mainArea" class="hidden">
    <div class="time-badge" id="timeBadge"></div>
    <div class="info" id="infoText"></div>
    <!-- BUTONDA HREF YOK — sadece click event ile calisiyor -->
    <button class="btn" id="goBtn">&#x25B6;&#xFE0F; Videoya Git</button>
  </div>

  <div class="help">
    Videoya gitmek için butona basın.<br>
    Video tarayıcıda açılacaktır.
  </div>
</div>

<!--
  KRITIK: Bu script SAYFA YUKLENDIGINDE hicbir Drive URL'si OLUSTURMAZ.
  Sifreli veri sadece degiskende tutulur.
  Drive URL'si SADECE buton click aninda hesaplanir ve yonlendirilir.
  Google Sheets link preview bu sayfayi fetch ettiginde:
  - HTML'de drive.google.com GECMEZ
  - JS otomatik calistiginda hicbir redirect OLMAZ
  - Hicbir <a href>, <iframe src>, window.location ATAMASI YOKTUR
  Sonuc: Sheets sadece statik bir HTML sayfasi gorur, video preview YAPAMAZ.
-->
<script>
(function() {
  /* === 1. URL PARAMETRELERINI OKU === */
  var p = new URLSearchParams(window.location.search);
  var enc = p.get('v');
  var ts = p.get('t');

  function showError(m) {
    document.getElementById('errorBox').classList.remove('hidden');
    document.getElementById('errorMsg').textContent = m;
  }

  if (!enc) {
    showError('Video parametresi (v) eksik.');
    return;
  }

  /* === 2. SIFRELI VERIYI SADECE DEGISKENDE SAKLA === */
  /* Hicbir yere yazma, hicbir DOM elementine atama, href olusturma */
  var _e = enc;
  var _t = ts ? ts.replace(/[^0-9hms]/g, '') : '';

  /* === 3. ZAMAN GOSTER (sadece gorsel, Drive ile ilgisi yok) === */
  document.getElementById('mainArea').classList.remove('hidden');

  if (_t && _t !== '0s') {
    document.getElementById('timeBadge').textContent = '\u23F1 ' + fmtTime(_t);
    document.getElementById('infoText').textContent =
      'Video ' + fmtTime(_t) + ' zamaninda acilacak.';
  } else {
    document.getElementById('timeBadge').textContent = '\u25B6\uFE0F Bastan';
    document.getElementById('infoText').textContent = 'Video bastan acilacak.';
  }

  /* === 4. BUTON CLICK — SADECE BU ANDA DECODE + REDIRECT === */
  document.getElementById('goBtn').addEventListener('click', function() {
    /* Decode: ters cevir (reverse) */
    var id = _e.split('').reverse().join('');
    id = id.replace(/[^a-zA-Z0-9_\-]/g, '');
    if (id.length < 10) {
      showError('Gecersiz video kodu.');
      return;
    }
    /* URL'yi SADECE SIMDI olustur */
    var u = 'https://drive.google.com/file/d/' + id + '/view';
    if (_t) u += '?t=' + _t;
    /* Yonlendir */
    window.location.href = u;
  });

  /* === YARDIMCI === */
  function fmtTime(t) {
    var h=0, m=0, s=0;
    var a = t.match(/(\d+)h/);
    var b = t.match(/(\d+)m/);
    var c = t.match(/(\d+)s/);
    if (a) h = parseInt(a[1]);
    if (b) m = parseInt(b[1]);
    if (c) s = parseInt(c[1]);
    return pad(h)+':'+pad(m)+':'+pad(s);
  }
  function pad(n) { return n < 10 ? '0'+n : ''+n; }
})();
</script>
</body>
</html>
